<!-- Header Start -->
<nav class="navbar navbar-expand-lg">
  <div class="container-fluid">
    <!-- Logo Section -->
    <a class="navbar-brand" routerLink="/">
      <img [src]="isDarkMode ? 'assets/images/logo_dark.png' : 'assets/images/logo.png'" alt="Logo" class="logo-image">
    </a>

    <!-- Navigation Section -->
    <div class="ms-auto d-flex align-items-center">
      <!-- Mode Toggle -->
      <div class="mode d-flex align-items-center px-3" (click)="toggleTheme()">
        <i id="themeIcon" class="bi" [ngClass]="isDarkMode ? 'bi-moon-fill' : 'bi-sun-fill'"></i>
        <span class="ms-2"></span>
      </div>

      <!-- User Dropdown -->
      <div class="dropdown">
        <a 
          class="d-flex align-items-center text-decoration-none" 
          href="#" 
          id="userDropdown" 
          role="button" 
          data-bs-toggle="dropdown" 
          aria-expanded="false">
          <img 
            [src]="user?.avatar || 'assets/images/avatar.png'" 
            alt="User Avatar" 
            class="rounded-circle user-avatar">
          <div class="ms-2">
            <span class="d-block" [ngClass]="isDarkMode ? '' : 'text-dark'">
              {{ user?.name || 'Chargement...' }}
            </span>
            <small [ngClass]="isDarkMode ? 'text-white' : 'text-dark'">
              {{ user?.roles?.[0] || 'Chargement...' }}
            </small>
          </div>
        </a>

        <!-- Dropdown Menu -->
        <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="userDropdown">
          <li>
            <a class="dropdown-item" href="#" data-bs-toggle="modal" data-bs-target="#profileModal">
              <i class="bi bi-person-circle me-2"></i> Mon Profil
            </a>
          </li>
          <li><hr class="dropdown-divider"></li>
          <li>
            <a class="dropdown-item" (click)="logout()">
              <i class="bi bi-box-arrow-right me-2"></i> Déconnexion
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>
</nav>
<!-- Header End -->

<!-- Profile Modal -->
<div 
  class="modal fade" 
  id="profileModal" 
  tabindex="-1" 
  aria-labelledby="profileModalLabel" 
  aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="profileModalLabel">Mon Profil</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <ul class="list-unstyled">
          <li><strong>Nom :</strong> {{ user?.name || 'Non renseigné' }}</li>
          <li><strong>Email :</strong> {{ user?.email || 'Non renseigné' }}</li>
          <li><strong>Téléphone :</strong> {{ user?.telephone || 'Non renseigné' }}</li>
          <li><strong>Adresse :</strong> {{ user?.adresse || 'Non renseigné' }}</li>
        </ul>
      </div>
    </div>
  </div>
</div>
